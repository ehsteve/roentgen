[tool.poetry]
name = "roentgen"
version = "1.1.0"
description = "A Python package for the quantitative analysis of the interaction of energetic x-rays with matter. This package is named after one of the discoverers of X-rays, Wilhelm Rontgen."
authors = ["Steven Christe <ehsteve@users.noreply.github.com>"]
readme = "README.rst"
packages = [{include = "roentgen"}, {include="gui"}]
license = "Apache-2.0"
homepage = "https://github.com/ehsteve/roentgen"
repository = "https://github.com/ehsteve/roentgen"
documentation = "https://roentgen.readthedocs.io/en/latest/"

keywords = ["python", "x-ray", "roentgen"]

[tool.poetry.dependencies]
python = "^3.7"
numpy = "^1.17.0"
scipy = "^1.3.0"
matplotlib = "^3.3.0"
astropy = "^4.2.1"

[tool.poetry.extras]
gui = ["bokeh"]
docs = ["sphinx", "sunpy-sphinx-theme", "sphinx-automodapi"]
dev = ["pytest-astropy", "black", "isort", "flake8"]

[tool.poetry.urls]
Issues = "https://github.com/ehsteve/roentgen/issues"

[build-system]
requires = ["poetry-core"]
build-backend = "poetry.core.masonry.api"

[tool.pytest]
minversion = 3.0
testpaths = ["roentgen", "docs"]
norecursedirs = ["build", "docs/_build", "docs/generated", "*.egg-info", "examples"]
doctest_plus = "enabled"
text_file_format = "rst"
addopts = "--doctest-modules"
astropy_header = true
filterwarnings = [
     # This is due to dependencies building with a numpy version different from
     # the local installed numpy version, but should be fine
     # See https://github.com/numpy/numpy/issues/15748#issuecomment-598584838
     "ignore:numpy.ufunc size changed:RuntimeWarning",
     "ignore:numpy.ndarray size changed:RuntimeWarning",
     # See https://github.com/astropy/extension-helpers/issues/23
     "ignore:Distutils was imported before Setuptools"
]

[tool.pycodestyle]
exclude = ["extern", "sphinx", "*parsetab.py", "conftest.py", "docs/conf.py", "setup.py", "gui/main.py"]
max_line_length = 100
# ignore line length
ignore = ["E501", "E302"]

[tool.isort]
profile = "black"
src_paths = ["roentgen", "test"]
line_length = 100
balanced_wrapping = true
default_section = "THIRDPARTY"
include_trailing_comma = true
known_astropy = "astropy"
known_first_party = "roentgen"
length_sort = false
length_sort_sections="stdlib"
multi_line_output = 3
no_lines_before = "LOCALFOLDER"
sections = ["STDLIB", "THIRDPARTY", "ASTROPY", "FIRSTPARTY", "LOCALFOLDER"]

[tool.black]
line_length = 100

[tool.coverage.run]
omit = [
  "roentgen/conftest.py",
  "roentgen/*setup_package*",
  "roentgen/tests/*",
  "roentgen/*/tests/*",
  "roentgen/extern/*",
  "roentgen/version*",
  "*/roentgen/_sunpy_init*",
  "*/roentgen/conftest.py",
  "*/roentgen/*setup_package*",
  "*/roentgen/tests/*",
  "*/roentgen/*/tests/*",
  "*/roentgen/extern/*",
  "*/roentgen/version*"
]

[tool.coverage.html]
directory = "coverage"

[tool.coverage.report]
exclude_lines = [
  # Have to re-enable the standard pragma
  "pragma: no cover",
  # Don't complain about packages we have installed
  "except ImportError",
  # Don't complain if tests don't hit assertions
  "raise AssertionError",
  "raise NotImplementedError",
  # Ignore branches that don't pertain to this version of Python
  "pragma: py{ignore_python_version}",
  # Don't complain about IPython completion helper
  "def _ipython_key_completions_",
]