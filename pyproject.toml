[tool.poetry]
name = "roentgen"
version = "2.1.0"
description = "A Python package for the quantitative analysis of the interaction of energetic x-rays with matter. This package is named after one of the discoverers of X-rays, Wilhelm Rontgen."
authors = ["Steven Christe <ehsteve@users.noreply.github.com>", "Nabil Freij <nabobalis@users.noreply.github.com>", "Shane Maloney <samaloney@users.noreply.github.com>, Dan Ryan <DanRyanIrish@users.noreply.github.com>"]
readme = "README.rst"
packages = [{include = "roentgen"}, {include="gui"}]
license = "Apache-2.0"
homepage = "https://github.com/ehsteve/roentgen"
repository = "https://github.com/ehsteve/roentgen"
documentation = "https://roentgen.readthedocs.io/en/latest/"

keywords = ["python", "x-ray", "roentgen"]

classifiers = [
    "Development Status :: 5 - Production/Stable",
    "License :: OSI Approved :: Apache Software License",
    "Operating System :: OS Independent",
    "Programming Language :: Python :: 3 :: Only",
    "Programming Language :: Python :: 3.9",
    "Topic :: Scientific/Engineering :: Astronomy",
    "Topic :: Scientific/Engineering :: Medical Science Apps.",
    "Topic :: Scientific/Engineering :: Physics"
]

[tool.poetry.dependencies]
python = "~3.9"    # see https://github.com/python-poetry/poetry/issues/4316
astropy = "^5.1"
scipy = "^1.9.1"
numpy = "^1.23.3"

[tool.poetry.group.dev.dependencies]
pytest = "^7.1.3"
pytest-astropy = "^0.10.0"
isort = "^5.10.1"
black = "^22.10.0"
flake8 = "^5.0.4"
coverage = "^6.5.0"

[tool.poetry.group.docs.dependencies]
matplotlib = "^3.6.0"
sphinx = "^5.2.3"
sphinx-automodapi = "^0.14.1"
graphviz = "^0.20.1"

[tool.poetry.group.gui.dependencies]
bokeh = "^2.4.3"

[tool.poetry.urls]
Issues = "https://github.com/ehsteve/roentgen/issues"

[build-system]
requires = ["poetry-core"]
build-backend = "poetry.core.masonry.api"

[tool.pytest]
minversion = 3.0
testpaths = ["roentgen", "docs"]
norecursedirs = ["build", "docs/_build", "docs/generated", "*.egg-info", "examples"]
doctest_plus = "enabled"
text_file_format = "rst"
addopts = "--doctest-modules"
astropy_header = true
filterwarnings = [
     # This is due to dependencies building with a numpy version different from
     # the local installed numpy version, but should be fine
     # See https://github.com/numpy/numpy/issues/15748#issuecomment-598584838
     "ignore:numpy.ufunc size changed:RuntimeWarning",
     "ignore:numpy.ndarray size changed:RuntimeWarning",
     # See https://github.com/astropy/extension-helpers/issues/23
     "ignore:Distutils was imported before Setuptools"
]


[tool.isort]
profile = "black"
src_paths = ["roentgen", "test"]
line_length = 100
balanced_wrapping = true
default_section = "THIRDPARTY"
include_trailing_comma = true
known_astropy = "astropy"
known_first_party = "roentgen"
length_sort = false
length_sort_sections="stdlib"
multi_line_output = 3
no_lines_before = "LOCALFOLDER"
sections = ["STDLIB", "THIRDPARTY", "ASTROPY", "FIRSTPARTY", "LOCALFOLDER"]

[tool.black]
line_length = 100

[tool.coverage.run]
omit = [
  "roentgen/conftest.py",
  "roentgen/*setup_package*",
  "roentgen/tests/*",
  "roentgen/*/tests/*",
  "roentgen/extern/*",
  "roentgen/version*",
  "*/roentgen/_sunpy_init*",
  "*/roentgen/conftest.py",
  "*/roentgen/*setup_package*",
  "*/roentgen/tests/*",
  "*/roentgen/*/tests/*",
  "*/roentgen/extern/*",
  "*/roentgen/version*"
]

[tool.coverage.html]
directory = "coverage"

[tool.coverage.report]
exclude_lines = [
  # Have to re-enable the standard pragma
  "pragma: no cover",
  # Don't complain about packages we have installed
  "except ImportError",
  # Don't complain if tests don't hit assertions
  "raise AssertionError",
  "raise NotImplementedError",
  # Ignore branches that don't pertain to this version of Python
  "pragma: py{ignore_python_version}",
  # Don't complain about IPython completion helper
  "def _ipython_key_completions_",
]